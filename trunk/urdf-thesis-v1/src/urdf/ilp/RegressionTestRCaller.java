package urdf.ilp;

import java.io.BufferedInputStream;
import java.io.File;
import java.io.IOException;
import java.io.InputStream;

import org.apache.commons.io.FileUtils;

import rcaller.InputStreamConsumer;
import rcaller.RCaller;

public class RegressionTestRCaller {
	static double[] x={-16.800,-15.100,-7.900,-7.800,-7.200,-6.400,-5.700,-5.000,-5.000,
		-5.000,-4.900,-4.900,-4.900,-4.900,-4.600,-4.500,-4.000,-4.000,
		-3.500,-3.500,-3.400,-3.300,-3.100,-2.900,-2.900,-2.500,-2.200,
		-2.100,-2.100,-1.800,-1.500,-1.500,-1.300,-1.200,-1.100,-1.000,
		-0.739,-0.600,-0.300,-0.200,-0.100,0.100,0.200,1.400,1.500,
		1.600,1.700,1.800,1.800,1.800,2.000,2.200,2.300,2.600,
		2.700,2.900,3.100,3.500,3.700,3.700,3.800,3.800,3.900,
		4.100,4.200,4.300,4.500,4.600,4.700,4.700,4.800,5.000,
		5.200,5.300,5.600,5.600,5.800,6.100,6.300,7.000,7.000,
		7.300,7.600,8.310,8.900,9.000,9.100,11.600,11.800,13.200,
		14.100,15.100,39.400};
	static double[] y={0.00000000,0.06060606,0.18666667,0.23529412,0.27272727,0.45000000,
		0.47058824,0.25000000,0.31944444,0.10000000,0.20000000,0.15000000,
		0.12500000,0.50000000,0.25609756,0.00000000,0.00000000,0.00000000,
		0.16666667,0.29268293,0.13793103,0.25000000,0.05882353,0.00000000,
		0.00000000,0.00000000,0.16666667,0.00000000,0.25595238,0.00000000,
		0.00000000,0.11538462,0.09756098,0.23880597,0.37500000,0.00000000,
		0.00000000,0.57142857,0.00000000,0.15384615,0.00000000,0.21428571,
		0.11111111,0.00000000,0.00000000,0.52908587,0.00000000,0.00000000,
		1.00000000,0.29629630,0.53846154,0.00000000,0.00000000,0.14814815,
		0.23529412,1.00000000,0.00000000,0.12820513,0.00000000,0.16666667,
		0.00000000,0.33333333,0.00000000,0.17391304,0.27083333,0.00000000,
		0.00000000,0.05194805,0.50000000,0.16666667,0.17391304,0.00000000,
		0.00000000,1.00000000,0.00000000,0.00000000,0.00000000,0.00000000,
		0.00000000,0.00000000,0.00000000,0.35714286,0.00000000,1.00000000,
		0.00000000,1.00000000,0.08333333,0.00000000,0.00000000,0.00000000,
		0.00000000,0.50000000,0.33333333};
	static double[] w={5,33,75,17,33,20,17,8,72,150,5,20,24,280,82,4,1,17,18,
		41,29,8,34,1,8,1,12,12,168,2,1,26,41,67,24,2,3,7,
		1,52,11,84,9,1,5,361,1,1,1,27,26,3,2,27,34,1,1,
		39,2,6,1,3,22,23,48,12,2,77,2,12,23,1,6,1,5,18,
		1,7,1,3,4,14,1,1,2,1,12,3,1,1,9,2,15};
	
	static double[] xBucket={-15.52500,-7.90000,-7.71000,-6.40000,-5.59500,-5.00000,
		-4.90000,-4.60000,-4.10000,-3.50000,-3.40000,
		-3.18000,-2.53000,-2.10000,-1.53000,-1.30000,-1.20000,-1.10000,
		-0.50585,-0.01000,0.93500,1.79500,2.00000,2.51000,2.70000,
		3.45000,3.80000,4.10000,4.20000,4.41000,4.73000,5.43500,
		6.65000,9.33550,22.89500};
	static double[] yBucket={0.04545455,0.18666667,0.24090909,0.45000000,0.43750000,0.31944444,
		0.16250000,0.12500000,0.00000000,
		0.17926829,0.13793103,0.13529412,0.08333333,0.10238095,0.09807692,
		0.09756098,0.23880597,0.37500000,0.25384615,0.09642857,0.18227147,
		0.30185185,0.53846154,0.11111111,0.23529412,0.16538462,0.10000000,
		0.17391304,0.27083333,0.01558442,0.20217391,0.05000000,0.07142857,
		0.15000000,0.16666667};
	static int[] numTestPoints = {100};
	static int[] numBuckets = {10};
	static double[] span = {0.75};
	static String[] title = {"Plot1"};
	
	/**
	 * @param args
	 */
	@SuppressWarnings("deprecation")
	public static void main(String[] args) {
		// TODO Auto-generated method stub
		try{
            RCaller caller = new RCaller();
            caller.setRscriptExecutable("/home/adeoliv/Downloads/R-2.15.1/bin/Rscript");
            caller.cleanRCode();
            caller.addDoubleArray("x", x);
            caller.addDoubleArray("y", y);
            caller.addDoubleArray("w", w);
            caller.addDoubleArray("span", span);
            caller.addStringArray("title", title);
            caller.addIntArray("numTestPoints",numTestPoints);
            caller.addIntArray("numBuckets",numBuckets);
            
            File file = caller.startPlot();
            
            caller.R_source("/home/adeoliv/Documents/Thesis/r/utils.r");
            caller.R_source("/home/adeoliv/Documents/Thesis/r/rcaller.r");

            caller.endPlot();
            caller.runOnly();
            caller.showPlot(file);
            File plot = new File("rules/plots/linesIn(A,B)<-isCitizenOf(A,B).png");
            FileUtils.copyFile(file, plot);
            System.out.println(file.getAbsolutePath());
            System.out.println(plot.getAbsolutePath());

        }catch (Exception e){
            System.out.println(e.toString());
        }
	}

}
